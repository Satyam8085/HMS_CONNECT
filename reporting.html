<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reporting and Analytics | HMS CONNECT</title>
  <link rel="stylesheet" href="reporting.css" />
</head>
<body>

  <div class="navbar">
    <div class="left">
      <img src="v987-18a.jpg" alt="Logo">
      <h4>HMS CONNECT</h4>
    </div>
    <div class="right">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="login.html">Login</a></li>
      </ul>
    </div>
  </div>

  <section class="reporting-section">
    <h1 class="section-title">üìä Reporting and Analytics</h1>
    <p class="section-subtitle">View and generate data-driven insights to improve hospital performance.</p>

    <div class="report-filters">
      <h2>üîç Filter Reports</h2>
      <form>
        <label for="report-type">Report Type</label>
        <select id="report-type" name="report-type" required>
          <option value="" disabled selected>Select report type</option>
          <option value="patients">Patient Admissions</option>
          <option value="appointments">Appointments</option>
          <option value="billing">Billing Summary</option>
          <option value="inventory">Inventory Usage</option>
        </select>

        <label for="date-from">From</label>
        <input type="date" id="date-from" name="date-from" required>

        <label for="date-to">To</label>
        <input type="date" id="date-to" name="date-to" required>

        <button type="submit" class="generate-btn">üìà Generate Report</button>
      </form>
    </div>

    <div class="report-output">
      <h2>üìë Report Preview</h2>
      <div class="report-placeholder">
        <p>No report generated yet. Use the filters above to begin.</p>
      </div>
    </div>
  </section>

  <section class="download-section">
    <h2 class="section-title">‚¨áÔ∏è Download Previous Reports</h2>
    <form class="download-form">
      <label for="report-download">Select a report</label>
      <select id="report-download" name="report-download" required>
        <option value="">-- Select a report --</option>
        <option value="report-patients-apr.pdf">Patient Admissions - April</option>
        <option value="report-billing-q1.pdf">Billing Summary - Q1</option>
        <option value="report-inventory-mar.pdf">Inventory Usage - March</option>
      </select>
      <button type="submit" class="download-btn">Download</button>
    </form>
  </section>

  <footer>
    <div class="footer-content">
      <p>&copy; 2025 HMS CONNECT. All rights reserved.</p>
      <p>Developed by: Satyam Singh</p>
      <p>Contact: support@hmsconnect.com | +91 8523697418</p>
      <p>Follow us on:
        <a href="https://www.facebook.com" target="_blank">Facebook</a> |
        <a href="https://www.twitter.com" target="_blank">Twitter</a> |
        <a href="https://www.instagram.com" target="_blank">Instagram</a>
      </p>
    </div>
  </footer>
</body>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const reportForm = document.querySelector('.report-filters form');
    const reportOutput = document.querySelector('.report-placeholder');
    const downloadForm = document.querySelector('.download-form');
    const reportSelect = document.getElementById('report-download');

    // Sample dummy data (could be replaced with real API data)
    const sampleReports = {
      patients: [
        { name: 'John Doe', date: '2025-07-15', type: 'Emergency' },
        { name: 'Aarav Mehta', date: '2025-07-16', type: 'Routine' },
      ],
      appointments: [
        { patient: 'Sanya', doctor: 'Dr. Raj', date: '2025-07-18', status: 'Completed' },
        { patient: 'Ravi', doctor: 'Dr. Harsha', date: '2025-07-19', status: 'Pending' },
      ],
      billing: [
        { invoice: 'INV102', patient: 'Aman', total: '‚Çπ2500', status: 'Paid' },
        { invoice: 'INV103', patient: 'Neha', total: '‚Çπ1200', status: 'Unpaid' },
      ],
      inventory: [
        { item: 'Paracetamol', used: '200 units', date: '2025-07-10' },
        { item: 'Syringes', used: '120 units', date: '2025-07-12' },
      ],
    };

    function showToast(msg, type = 'success') {
      const toast = document.createElement('div');
      toast.textContent = msg;
      toast.style.position = 'fixed';
      toast.style.bottom = '20px';
      toast.style.left = '50%';
      toast.style.transform = 'translateX(-50%)';
      toast.style.background = type === 'success' ? '#22c55e' : '#ef4444';
      toast.style.color = 'white';
      toast.style.padding = '10px 20px';
      toast.style.borderRadius = '8px';
      toast.style.fontWeight = 'bold';
      toast.style.boxShadow = '0 0 10px rgba(0,0,0,0.2)';
      toast.style.zIndex = '9999';
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    function formatReport(type, data) {
      let html = `<h3 style="margin-top:10px;">Generated Report - ${type.replace(/^\w/, c => c.toUpperCase())}</h3><table border="1" cellpadding="6" style="width:100%; margin-top:10px; border-collapse: collapse;">`;
      
      if (type === 'patients') {
        html += `<tr><th>Name</th><th>Date</th><th>Type</th></tr>`;
        data.forEach(d => {
          html += `<tr><td>${d.name}</td><td>${d.date}</td><td>${d.type}</td></tr>`;
        });
      } else if (type === 'appointments') {
        html += `<tr><th>Patient</th><th>Doctor</th><th>Date</th><th>Status</th></tr>`;
        data.forEach(d => {
          html += `<tr><td>${d.patient}</td><td>${d.doctor}</td><td>${d.date}</td><td>${d.status}</td></tr>`;
        });
      } else if (type === 'billing') {
        html += `<tr><th>Invoice</th><th>Patient</th><th>Total</th><th>Status</th></tr>`;
        data.forEach(d => {
          html += `<tr><td>${d.invoice}</td><td>${d.patient}</td><td>${d.total}</td><td>${d.status}</td></tr>`;
        });
      } else if (type === 'inventory') {
        html += `<tr><th>Item</th><th>Used</th><th>Date</th></tr>`;
        data.forEach(d => {
          html += `<tr><td>${d.item}</td><td>${d.used}</td><td>${d.date}</td></tr>`;
        });
      }

      html += `</table>`;
      return html;
    }

    // Handle Report Generation
    reportForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const type = document.getElementById('report-type').value;
      const from = document.getElementById('date-from').value;
      const to = document.getElementById('date-to').value;

      if (!type || !from || !to) {
        showToast("‚ö†Ô∏è Please fill all filter fields", "error");
        return;
      }

      const data = sampleReports[type] || [];
      if (data.length === 0) {
        reportOutput.innerHTML = "<p>No data found for this report type.</p>";
      } else {
        reportOutput.innerHTML = formatReport(type, data);
      }

      showToast("‚úÖ Report generated successfully!");
    });

    // Handle Download Report
    downloadForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const selectedFile = reportSelect.value;
      if (!selectedFile) {
        showToast("‚ö†Ô∏è Please select a report to download", "error");
        return;
      }

      // Simulate download
      const link = document.createElement('a');
      link.href = selectedFile;
      link.download = selectedFile;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      showToast(`‚¨áÔ∏è Download started: ${selectedFile}`);
    });
  });
</script>
</html>
